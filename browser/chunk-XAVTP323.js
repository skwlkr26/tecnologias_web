import{a as w}from"./chunk-5NO2USKP.js";import{C as d,I as l,J as r,K as i,M as b,N as g,O as s,R as o,S as f,ca as v,da as C,ea as I,la as E,n as p,na as k,o as u,v as a,x as _,y as h}from"./chunk-BNIHG3HZ.js";function O(t,n){if(t&1){let e=b();r(0,"button",4),g("click",function(){p(e);let m=s();return u(m.goToCreate())}),o(1,"Crear nuevo"),i()}}function S(t,n){t&1&&(r(0,"th"),o(1,"Acciones"),i())}function L(t,n){if(t&1){let e=b();r(0,"td")(1,"button",6),g("click",function(){p(e);let m=s().$implicit,x=s(2);return u(x.editItem(m.id))}),o(2,"Editar"),i(),r(3,"button",6),g("click",function(){p(e);let m=s().$implicit,x=s(2);return u(x.deleteItem(m.id))}),o(4,"Eliminar"),i()()}}function P(t,n){if(t&1&&(r(0,"tr")(1,"td"),o(2),i(),r(3,"td"),o(4),i(),r(5,"td"),o(6),i(),d(7,L,5,0,"td",2),i()),t&2){let e=n.$implicit,c=s(2);a(2),f(e.id),a(2),f(e.name),a(2),f(e.description),a(),l("ngIf",c.isAdmin)}}function y(t,n){if(t&1&&(r(0,"table")(1,"thead")(2,"tr")(3,"th"),o(4,"ID"),i(),r(5,"th"),o(6,"Nombre"),i(),r(7,"th"),o(8,"Descripci\xF3n"),i(),d(9,S,2,0,"th",2),i()(),r(10,"tbody"),d(11,P,8,4,"tr",5),i()()),t&2){let e=s();a(9),l("ngIf",e.isAdmin),a(2),l("ngForOf",e.items)}}function T(t,n){t&1&&(r(0,"div"),o(1,"No hay \xEDtems."),i())}function A(t,n){if(t&1&&(r(0,"div",7),o(1),i()),t&2){let e=s();a(),f(e.error)}}var M=class t{constructor(n,e,c){this.crud=n;this.router=e;this.auth=c;this.isAdmin=this.auth.getRole()==="admin",this.loadItems()}items=[];error="";loading=!1;isAdmin=!1;loadItems(){this.loading=!0,this.crud.getAll().subscribe({next:n=>{this.items=n,this.loading=!1},error:()=>{this.error="No se pudieron cargar los \xEDtems",this.loading=!1}})}editItem(n){this.router.navigate(["/edit",n])}deleteItem(n){confirm("\xBFSeguro que deseas eliminar este \xEDtem?")&&this.crud.delete(n).subscribe({next:()=>this.loadItems(),error:()=>this.error="No se pudo eliminar el \xEDtem"})}goToCreate(){this.router.navigate(["/create"])}static \u0275fac=function(e){return new(e||t)(_(w),_(E),_(k))};static \u0275cmp=h({type:t,selectors:[["app-list"]],decls:7,vars:4,consts:[[1,"list-container"],["class","create-btn",3,"click",4,"ngIf"],[4,"ngIf"],["class","error",4,"ngIf"],[1,"create-btn",3,"click"],[4,"ngFor","ngForOf"],[3,"click"],[1,"error"]],template:function(e,c){e&1&&(r(0,"div",0)(1,"h2"),o(2,"Lista de \xEDtems"),i(),d(3,O,2,0,"button",1)(4,y,12,2,"table",2)(5,T,2,0,"div",2)(6,A,2,1,"div",3),i()),e&2&&(a(3),l("ngIf",c.isAdmin),a(),l("ngIf",c.items.length),a(),l("ngIf",!c.items.length&&!c.loading),a(),l("ngIf",c.error))},dependencies:[I,v,C],styles:[".list-container[_ngcontent-%COMP%]{max-width:900px;margin:3rem auto;padding:2rem;background:#fff;border-radius:12px;box-shadow:0 4px 24px #2c3e501a}.list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#6c63ff;margin-bottom:1.5rem}.create-btn[_ngcontent-%COMP%]{background:#6c63ff;color:#fff;border:none;border-radius:6px;padding:.7rem 1.2rem;font-size:1.1rem;font-weight:600;margin-bottom:1.2rem;cursor:pointer;transition:background .2s}.create-btn[_ngcontent-%COMP%]:hover{background:#554ee2}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:#fff;border-radius:10px;box-shadow:0 2px 8px #00000014;overflow:hidden}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #e0e0e0;padding:.7rem 1.2rem;text-align:left}th[_ngcontent-%COMP%]{background:#f5f6fa;color:#6c63ff}tr[_ngcontent-%COMP%]:nth-child(2n){background:#f9f9f9}button[_ngcontent-%COMP%]{margin-right:.5rem;padding:.4rem .9rem;border-radius:5px;border:none;font-weight:500;cursor:pointer;background:#eaeaea;color:#444;transition:background .2s,color .2s}button[_ngcontent-%COMP%]:hover{background:#6c63ff;color:#fff}.error[_ngcontent-%COMP%]{color:#e74c3c;margin-top:.7rem;font-size:.98rem}"]})};export{M as List};
